---
title: "Webhooks"
description: "Real-time event notifications and webhook configuration guide"
---

## Webhook Overview

Webhooks provide real-time notifications when events occur in your Request Network integration. Instead of polling for updates, webhooks push event data to your application immediately when payments are detected, requests are created, or other significant events happen.

## Webhook Events

### Payment Events

<CardGroup cols={2}>
  <Card title="payment_detected" icon="search">
    **When:** Payment transaction is detected on blockchain
    
    **Use Cases:**
    - Show "Payment Pending" status to users
    - Start order preparation
    - Send confirmation emails
    
    **Typical Timing:** Within 1-5 seconds of transaction
  </Card>
  
  <Card title="payment_confirmed" icon="check-circle">
    **When:** Payment is confirmed on blockchain (sufficient confirmations)
    
    **Use Cases:**
    - Complete order fulfillment
    - Update accounting systems
    - Release digital goods
    
    **Typical Timing:** 1-15 minutes after payment
  </Card>
</CardGroup>

<CardGroup cols={2}>
  <Card title="payment_failed" icon="x-circle">
    **When:** Payment transaction fails or is reverted
    
    **Use Cases:**
    - Notify customer of payment failure
    - Reset order status
    - Trigger retry workflows
    
    **Triggers:** Failed transactions, insufficient gas, reverted smart contract calls
  </Card>
  
  <Card title="payment_partially_completed" icon="clock">
    **When:** Partial payment is received for a request
    
    **Use Cases:**
    - Update outstanding balance
    - Notify of partial payment
    - Allow additional payments
    
    **Common Scenarios:** Installment payments, partial order fulfillment
  </Card>
</CardGroup>

### Request Events

<CardGroup cols={2}>
  <Card title="request_created" icon="file-plus">
    **When:** New payment request is created
    
    **Payload Includes:**
    - Request ID and details
    - Payment information
    - Custom metadata
    
    **Use Cases:** CRM integration, analytics tracking
  </Card>
  
  <Card title="request_updated" icon="edit">
    **When:** Request metadata or status is modified
    
    **Payload Includes:**
    - Updated fields
    - Previous values
    - Change timestamp
    
    **Use Cases:** Audit trails, status synchronization
  </Card>
</CardGroup>

### Subscription Events

<CardGroup cols={2}>
  <Card title="subscription_renewed" icon="repeat">
    **When:** Recurring payment is successfully processed
    
    **Use Cases:**
    - Extend subscription period
    - Send renewal confirmation
    - Update billing systems
    
    **For:** [Subscription](/use-cases/subscriptions) use cases
  </Card>
  
  <Card title="subscription_failed" icon="exclamation-triangle">
    **When:** Recurring payment fails
    
    **Use Cases:**
    - Notify customer of failed payment
    - Initiate payment retry
    - Manage subscription status
    
    **Common Causes:** Insufficient funds, expired payment methods
  </Card>
</CardGroup>

## Webhook Configuration

### Setting Up Webhooks

<Steps>
  <Step title="Configure Endpoint">
    Set up a webhook endpoint URL in the [Request Portal](https://portal.request.network)
  </Step>
  <Step title="Select Events">
    Choose which event types you want to receive
  </Step>
  <Step title="Test Endpoint">
    Use the test webhook feature to verify your endpoint
  </Step>
  <Step title="Go Live">
    Enable webhooks for production traffic
  </Step>
</Steps>

### Webhook Endpoint Requirements

<Tabs>
  <Tab title="HTTP Requirements">
    **Endpoint Specifications:**
    - Must be publicly accessible HTTPS URL
    - Should return 2xx status code for successful processing
    - Timeout limit: 30 seconds
    - Must handle duplicate events (idempotency)
    
    ```javascript
    app.post('/webhooks/request-network', (req, res) => {
      try {
        // Process webhook event
        const { eventType, data } = req.body;
        
        // Your business logic here
        processEvent(eventType, data);
        
        // Return success status
        res.status(200).send('OK');
        
      } catch (error) {
        // Return error status for retry
        console.error('Webhook processing error:', error);
        res.status(500).send('Error processing webhook');
      }
    });
    ```
  </Tab>
  
  <Tab title="Security">
    **Webhook Security:**
    - Verify webhook signatures
    - Use HTTPS only
    - Implement request validation
    - Rate limit webhook endpoints
    
    ```javascript
    const crypto = require('crypto');
    
    function verifyWebhookSignature(req) {
      const signature = req.headers['x-request-signature'];
      const timestamp = req.headers['x-request-timestamp'];
      const payload = JSON.stringify(req.body);
      
      // Verify timestamp (prevent replay attacks)
      const currentTime = Math.floor(Date.now() / 1000);
      if (Math.abs(currentTime - timestamp) > 300) { // 5 minute tolerance
        return false;
      }
      
      // Verify signature
      const expectedSignature = crypto
        .createHmac('sha256', process.env.WEBHOOK_SECRET)
        .update(timestamp + payload)
        .digest('hex');
      
      return crypto.timingSafeEqual(
        Buffer.from(signature, 'hex'),
        Buffer.from(expectedSignature, 'hex')
      );
    }
    ```
  </Tab>
  
  <Tab title="Retry Logic">
    **Automatic Retries:**
    - Retry schedule: 1s, 5s, 25s, 125s, 625s
    - Maximum 5 retry attempts
    - Exponential backoff with jitter
    - Dead letter queue for failed webhooks
    
    **Error Handling:**
    ```javascript
    app.post('/webhooks/request-network', async (req, res) => {
      try {
        const { eventType, data } = req.body;
        
        // Process event
        await processEvent(eventType, data);
        
        res.status(200).send('OK');
        
      } catch (error) {
        if (error.permanent) {
          // Don't retry permanent errors
          res.status(400).send('Permanent error');
        } else {
          // Retry temporary errors
          res.status(500).send('Temporary error');
        }
      }
    });
    ```
  </Tab>
</Tabs>

## Webhook Payloads

### Payment Confirmed Event

<CodeGroup>
```json Payment Confirmed
{
  "eventType": "payment_confirmed",
  "timestamp": "2025-09-12T10:30:00Z",
  "data": {
    "requestId": "req_1234567890abcdef",
    "paymentReference": "pay_abcdef1234567890",
    "transactionHash": "0x742d35cc6cf8a8cbeff61cf82c6b8b3b42a67f1d6c1e8a7b9e2f8d5c3a1b0e9f",
    "blockNumber": 18523456,
    "networkName": "matic",
    "amount": "1000000000000000000000", // 1000 USDC (18 decimals)
    "currency": "USDC-matic",
    "payerAddress": "0x1234567890123456789012345678901234567890",
    "payeeAddress": "0x0987654321098765432109876543210987654321",
    "fees": {
      "platformFee": "25000000000000000000", // 25 USDC
      "gasFee": "0.02"
    },
    "metadata": {
      "reason": "Invoice #INV-001",
      "invoiceNumber": "INV-001",
      "customerEmail": "customer@example.com",
      "orderId": "ORD-2025-001"
    }
  }
}
```

```json Request Created
{
  "eventType": "request_created",
  "timestamp": "2025-09-12T10:00:00Z",
  "data": {
    "requestId": "req_1234567890abcdef",
    "expectedAmount": "1000000000000000000000",
    "currency": "USDC-matic",
    "payeeAddress": "0x0987654321098765432109876543210987654321",
    "payerAddress": "0x1234567890123456789012345678901234567890",
    "status": "pending",
    "createdAt": "2025-09-12T10:00:00Z",
    "dueDate": "2025-10-12T10:00:00Z",
    "metadata": {
      "reason": "Professional Services Q3 2025",
      "invoiceNumber": "INV-001",
      "customerInfo": {
        "name": "Acme Corporation",
        "email": "billing@acme.com"
      }
    }
  }
}
```

```json Subscription Renewed
{
  "eventType": "subscription_renewed",
  "timestamp": "2025-09-12T10:30:00Z",
  "data": {
    "subscriptionId": "sub_1234567890abcdef",
    "requestId": "req_abcdef1234567890",
    "paymentReference": "pay_1234567890abcdef",
    "transactionHash": "0x742d35cc6cf8a8cbeff61cf82c6b8b3b42a67f1d6c1e8a7b9e2f8d5c3a1b0e9f",
    "amount": "2999000000000000000000", // $29.99
    "currency": "USD",
    "renewalPeriod": "monthly",
    "nextRenewalDate": "2025-10-12T10:30:00Z",
    "customerId": "cust_1234567890",
    "subscriptionPlan": {
      "name": "Pro Plan",
      "features": ["feature1", "feature2"],
      "billingCycle": "monthly"
    }
  }
}
```
</CodeGroup>

## Integration Examples

### E-commerce Order Processing

<CodeGroup>
```javascript Express.js Handler
app.post('/webhooks/payment-confirmed', async (req, res) => {
  try {
    // Verify webhook signature
    if (!verifyWebhookSignature(req)) {
      return res.status(401).send('Unauthorized');
    }
    
    const { eventType, data } = req.body;
    
    if (eventType === 'payment_confirmed') {
      const orderId = data.metadata.orderId;
      
      // Update order status
      await updateOrder(orderId, {
        status: 'paid',
        paymentHash: data.transactionHash,
        paidAt: data.timestamp,
        paymentMethod: 'crypto'
      });
      
      // Send confirmation email
      await sendOrderConfirmation(orderId);
      
      // Trigger fulfillment
      await triggerOrderFulfillment(orderId);
      
      console.log(`Order ${orderId} marked as paid`);
    }
    
    res.status(200).send('OK');
    
  } catch (error) {
    console.error('Webhook error:', error);
    res.status(500).send('Error processing webhook');
  }
});
```

```javascript SaaS Subscription Handler
app.post('/webhooks/subscription-events', async (req, res) => {
  try {
    const { eventType, data } = req.body;
    
    switch (eventType) {
      case 'subscription_renewed':
        // Extend subscription period
        await extendSubscription(data.customerId, data.renewalPeriod);
        
        // Send renewal confirmation
        await sendRenewalConfirmation(data.customerId);
        break;
        
      case 'subscription_failed':
        // Handle failed payment
        await handleFailedSubscriptionPayment(data.customerId);
        
        // Send payment failure notification
        await sendPaymentFailureNotification(data.customerId);
        break;
        
      case 'subscription_cancelled':
        // Deactivate subscription
        await deactivateSubscription(data.customerId);
        break;
    }
    
    res.status(200).send('OK');
    
  } catch (error) {
    console.error('Subscription webhook error:', error);
    res.status(500).send('Error processing subscription webhook');
  }
});
```
</CodeGroup>

### Database Integration

<CodeGroup>
```sql Payment Tracking
-- Create table for payment tracking
CREATE TABLE payment_events (
  id SERIAL PRIMARY KEY,
  request_id VARCHAR(255) NOT NULL,
  event_type VARCHAR(50) NOT NULL,
  transaction_hash VARCHAR(66),
  block_number INTEGER,
  amount DECIMAL(36, 18),
  currency VARCHAR(20),
  payer_address VARCHAR(42),
  payee_address VARCHAR(42),
  metadata JSONB,
  created_at TIMESTAMP DEFAULT NOW(),
  processed_at TIMESTAMP,
  INDEX idx_request_id (request_id),
  INDEX idx_event_type (event_type),
  INDEX idx_created_at (created_at)
);
```

```javascript Database Handler
async function savePaymentEvent(eventData) {
  const {
    requestId,
    eventType,
    transactionHash,
    blockNumber,
    amount,
    currency,
    payerAddress,
    payeeAddress,
    metadata
  } = eventData;
  
  // Insert payment event
  const result = await db.query(`
    INSERT INTO payment_events (
      request_id, event_type, transaction_hash, block_number,
      amount, currency, payer_address, payee_address, metadata
    ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
    RETURNING id
  `, [
    requestId, eventType, transactionHash, blockNumber,
    amount, currency, payerAddress, payeeAddress, JSON.stringify(metadata)
  ]);
  
  return result.rows[0].id;
}
```
</CodeGroup>

## Testing Webhooks

### Webhook Testing Tools

<CardGroup cols={2}>
  <Card title="ngrok" icon="globe">
    **Local Development:**
    - Expose local server to internet
    - Test webhooks during development
    - Secure tunnels with authentication
    
    ```bash
    # Install ngrok
    npm install -g ngrok
    
    # Expose local server
    ngrok http 3000
    
    # Use ngrok URL as webhook endpoint
    # https://abc123.ngrok.io/webhooks/request-network
    ```
  </Card>
  
  <Card title="Webhook.site" icon="test-tube">
    **Quick Testing:**
    - Temporary webhook endpoints
    - Inspect webhook payloads
    - No setup required
    
    **Process:**
    1. Go to webhook.site
    2. Copy the unique URL
    3. Use as webhook endpoint
    4. View received webhooks in browser
  </Card>
</CardGroup>

### Test Event Simulation

<Info>
**Test Webhooks in Request Portal**

Use the Request Portal to send test webhook events to your endpoint for development and testing.
</Info>

## What's Next?

<CardGroup cols={3}>
  <Card 
    title="🔐 Authentication" 
    href="/api-reference/authentication"
    icon="key"
  >
    Secure your API and webhook endpoints
  </Card>
  
  <Card 
    title="⚙️ Advanced Features" 
    href="/api-features/advanced-features"
    icon="cog"
  >
    Learn more about webhook event types and handling
  </Card>
  
  <Card 
    title="🛠️ Integration Patterns" 
    href="/api-features/integration-patterns"
    icon="puzzle-piece"
  >
    Common webhook integration patterns and best practices
  </Card>
</CardGroup>
